{% extends 'base.html' %}
{% load static %}

{% block title %}Ø·Ù„Ø¨Ø§ØªÙŠ - {{ block.super }}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold mb-2">Ø·Ù„Ø¨Ø§ØªÙŠ</h1>
        <p class="text-gray-600 dark:text-gray-400">Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª</p>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div class="bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-6 text-center">
            <div class="text-3xl font-bold text-yellow-600">{{ pending_orders.count }}</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div>
        </div>
        <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-6 text-center">
            <div class="text-3xl font-bold text-green-600">{{ enrolled_orders.count }}</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ø¤ÙƒØ¯Ø©</div>
        </div>
        <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-6 text-center">
            <div class="text-3xl font-bold text-blue-600">{{ completed_orders.count }}</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">Ù…ÙƒØªÙ…Ù„Ø©</div>
        </div>
        <div class="bg-red-50 dark:bg-red-900/20 rounded-xl p-6 text-center">
            <div class="text-3xl font-bold text-red-600">{{ cancelled_orders.count }}</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">Ù…Ù„ØºÙŠØ©</div>
        </div>
    </div>

    <!-- Tabs -->
    <div class="mb-6 border-b border-gray-200 dark:border-gray-700">
        <div class="flex gap-6 overflow-x-auto">
            <button onclick="showTab('pending')" class="tab-button active px-4 py-2 border-b-2 border-primary-600 text-primary-600 font-semibold">
                Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ({{ pending_orders.count }})
            </button>
            <button onclick="showTab('enrolled')" class="tab-button px-4 py-2 text-gray-500 hover:text-gray-700 dark:text-gray-400">
                Ù…Ø¤ÙƒØ¯Ø© ({{ enrolled_orders.count }})
            </button>
            <button onclick="showTab('completed')" class="tab-button px-4 py-2 text-gray-500 hover:text-gray-700 dark:text-gray-400">
                Ù…ÙƒØªÙ…Ù„Ø© ({{ completed_orders.count }})
            </button>
            <button onclick="showTab('cancelled')" class="tab-button px-4 py-2 text-gray-500 hover:text-gray-700 dark:text-gray-400">
                Ù…Ù„ØºÙŠØ© ({{ cancelled_orders.count }})
            </button>
        </div>
    </div>

    <!-- Pending Tab -->
    <div id="pending-tab" class="tab-content">
        {% if pending_orders %}
        <div class="space-y-4">
            {% for order in pending_orders %}
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-r-4 border-yellow-500">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-lg overflow-hidden">
                            {% if order.course.image %}
                            <img src="{{ order.course.image.url }}" alt="{{ order.course.title }}" class="w-full h-full object-cover">
                            {% else %}
                            <img src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80" 
                                 alt="{{ order.course.title }}" 
                                 class="w-full h-full object-cover">
                            {% endif %}
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">{{ order.course.title }}</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">{{ order.course.category.name }}</p>
                        </div>
                    </div>
                    <div class="text-left">
                        <span class="inline-block px-3 py-1 bg-yellow-100 dark:bg-yellow-900 text-yellow-600 dark:text-yellow-400 rounded-full text-sm font-semibold">
                            â³ Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©
                        </span>
                        <p class="text-xs text-gray-500 mt-2">{{ order.enrolled_at|date:'Y-m-d H:i' }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-12">
            <i class="fas fa-clock text-5xl text-gray-300 dark:text-gray-600 mb-4"></i>
            <p class="text-gray-500 dark:text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</p>
        </div>
        {% endif %}
    </div>

    <!-- Enrolled Tab -->
    <div id="enrolled-tab" class="tab-content hidden">
        {% if enrolled_orders %}
        <div class="space-y-4">
            {% for order in enrolled_orders %}
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-r-4 border-green-500">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-lg overflow-hidden">
                            {% if order.course.image %}
                            <img src="{{ order.course.image.url }}" alt="{{ order.course.title }}" class="w-full h-full object-cover">
                            {% else %}
                            <img src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80" 
                                 alt="{{ order.course.title }}" 
                                 class="w-full h-full object-cover">
                            {% endif %}
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">{{ order.course.title }}</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">{{ order.course.category.name }}</p>
                        </div>
                    </div>
                    <div class="text-left">
                        <span class="inline-block px-3 py-1 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded-full text-sm font-semibold">
                            âœ… Ù…Ø¤ÙƒØ¯Ø©
                        </span>
                        <p class="text-xs text-gray-500 mt-2">{{ order.enrolled_at|date:'Y-m-d H:i' }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-12">
            <i class="fas fa-check-circle text-5xl text-gray-300 dark:text-gray-600 mb-4"></i>
            <p class="text-gray-500 dark:text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ø¤ÙƒØ¯Ø©</p>
        </div>
        {% endif %}
    </div>

    <!-- Completed Tab -->
    <div id="completed-tab" class="tab-content hidden">
        {% if completed_orders %}
        <div class="space-y-4">
            {% for order in completed_orders %}
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-r-4 border-blue-500">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-lg overflow-hidden">
                            {% if order.course.image %}
                            <img src="{{ order.course.image.url }}" alt="{{ order.course.title }}" class="w-full h-full object-cover">
                            {% else %}
                            <img src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80" 
                                 alt="{{ order.course.title }}" 
                                 class="w-full h-full object-cover">
                            {% endif %}
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">{{ order.course.title }}</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">{{ order.course.category.name }}</p>
                        </div>
                    </div>
                    <div class="text-left">
                        <span class="inline-block px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 rounded-full text-sm font-semibold">
                            ğŸ‰ Ù…ÙƒØªÙ…Ù„Ø©
                        </span>
                        <p class="text-xs text-gray-500 mt-2">{{ order.completed_at|date:'Y-m-d H:i' }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-12">
            <i class="fas fa-trophy text-5xl text-gray-300 dark:text-gray-600 mb-4"></i>
            <p class="text-gray-500 dark:text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙˆØ±Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©</p>
        </div>
        {% endif %}
    </div>

    <!-- Cancelled Tab -->
    <div id="cancelled-tab" class="tab-content hidden">
        {% if cancelled_orders %}
        <div class="space-y-4">
            {% for order in cancelled_orders %}
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-r-4 border-red-500 opacity-75">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-lg overflow-hidden">
                            {% if order.course.image %}
                            <img src="{{ order.course.image.url }}" alt="{{ order.course.title }}" class="w-full h-full object-cover">
                            {% else %}
                            <img src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&h=200&q=80" 
                                 alt="{{ order.course.title }}" 
                                 class="w-full h-full object-cover">
                            {% endif %}
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">{{ order.course.title }}</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">{{ order.course.category.name }}</p>
                        </div>
                    </div>
                    <div class="text-left">
                        <span class="inline-block px-3 py-1 bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400 rounded-full text-sm font-semibold">
                            âŒ Ù…Ù„ØºÙŠØ©
                        </span>
                        <p class="text-xs text-gray-500 mt-2">{{ order.enrolled_at|date:'Y-m-d H:i' }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-12">
            <i class="fas fa-times-circle text-5xl text-gray-300 dark:text-gray-600 mb-4"></i>
            <p class="text-gray-500 dark:text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ù„ØºÙŠØ©</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
{% block extra_js %}
<script>
    function showTab(tabName) {
        // Hide all tabs
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.classList.add('hidden');
        });
        
        // Show selected tab
        document.getElementById(`${tabName}-tab`).classList.remove('hidden');
        
        // Update active tab button
        document.querySelectorAll('.tab-button').forEach(btn => {
            btn.classList.remove('active', 'border-primary-600', 'text-primary-600');
            btn.classList.add('text-gray-500');
        });
        
        event.target.classList.add('active', 'border-primary-600', 'text-primary-600');
        event.target.classList.remove('text-gray-500');
    }
</script>
{% endblock %}